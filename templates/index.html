{% load static %}

<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>BlockChain Auctions</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700,800" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700,900" rel="stylesheet">
        <link rel="apple-touch-icon" href="{% static 'apple-touch-icon.png' %}">
        <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}">
        <link rel="stylesheet" href="{% static 'css/bootstrap-theme.min.css' %}">
        <link rel="stylesheet" href="{% static 'css/fontAwesome.css' %}">
        <link rel="stylesheet" href="{% static 'css/hero-slider.css' %}">
        <link rel="stylesheet" href="{% static 'css/owl-carousel.css' %}">
        <link rel="stylesheet" href="{% static 'css/templatemo-style.css' %}">
        <link rel="stylesheet" href="{% static 'css/lightbox.css' %}">
        <link rel="stylesheet" href="{% static 'css/slider.css' %}">
        <link rel="icon" href="{% static 'img/favicon.ico' %}"/>

        <!-- JavaScript Bundle with Popper -->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" crossorigin="anonymous"></script>
        <script src="{% static 'js/vendor/modernizr-2.8.3-respond-1.4.2.min.js' %}"></script>
        <script language="Javascript">
            function popup(url, h, w) {
                var popTop = Math.floor((screen.height-h)/2);
                var popLeft = Math.floor((screen.width-w)/2);
                window.open(url, "popup", "height="+h+",width="+w+",top="+popTop+",left="+popLeft+",toolbar=no,menubar=no,status=no,scrollbars=no")
                }
        </script>
        <style type="text/css">
            div.allinea {
                float:left;
                margin-left:60px;
                }
        </style>
        <style>
            #auctionimg {
                width: 200px;
                height: 200px;
                }

            #auctionimg img {
                width: 100%;
                height:100%;
                object-fit: cover;
                }
        </style>
    </head>
<body>
    <div class="header">
        <div class="container">
            <nav class="navbar navbar-inverse" role="navigation">
                <div class="navbar-header">
                    <button type="button" id="nav-toggle" class="navbar-toggle" data-toggle="collapse" data-target="#main-nav">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a href="#" class="navbar-brand scroll-top"><span><img src="{% static 'img/block.png' %}" width="50" height="50"></span>lockAuctions</a>
                </div>
                <!--/.navbar-header-->
                <div id="main-nav" class="collapse navbar-collapse">
                    <ul class="nav navbar-nav">
                        {% if user.is_authenticated %}
                        <li><a href="#" class="scroll-top" data-id="home">Home</a></li>
                        <li><a href="#" class="scroll-link" data-id="about">About Us</a></li>
                        <li><a href="#" class="scroll-link" data-id="testimonial">Auctions</a></li>
                        <li><a href="#" class="scroll-link" data-id="blog">Publish</a></li>
                        <li><a href="#" class="scroll-link" data-id="contact-us">Contact</a></li>
                        <li><a href="#">Ciao, {{user}}!</a></li>
                        <li><a href="logout">Logout</a></li>
                        {% else %}
                        <li><a href="#" class="scroll-top" data-id="home">Home</a></li>
                        <li><a href="#" class="scroll-link" data-id="about">About Us</a></li>
                        <li><a href="#" class="scroll-link" data-id="contact-us">Contact Us</a></li>
                        <li><a href="login">Login</a></li>
                        <li><a href="registration">Register</a></li>
                        {% endif %}
                    </ul>
                </div>
                <!--/.navbar-collapse-->
            </nav>
            <!--/.navbar-->
        </div>
        <!--/.container-->
    </div>
    <!--/.header-->


    <div class="parallax-content baner-content" id="home">
        <div class="container">
            <div class="text-content">

            </div>
        </div>
    </div>

    <section id="about" class="page-section">
        <div class="container">
            <div class="row">
                <div class="col-md-3 col-sm-6 col-xs-12">
                    <div class="service-item">
                        <div class="icon">
                            <img src="" alt="">
                        </div>
                        <h4>Account Registration</h4>
                        <div class="line-dec"></div>
                        <p>Register an account and start to publish or bid auctions!</p>
                        <div class="primary-blue-button">
                        </div>
                    </div>
                </div>
                <div class="col-md-3 col-sm-6 col-xs-12">
                    <div class="service-item">
                        <div class="icon">
                            <img src="img/service_icon_02.png" alt="">
                        </div>
                        <h4>Auction Publication</h4>
                        <div class="line-dec"></div>
                        <p>Create your auction with image, description and price!</p>
                        <div class="primary-blue-button">
                        </div>
                    </div>
                </div>
                <div class="col-md-3 col-sm-6 col-xs-12">
                    <div class="service-item">
                        <div class="icon">
                            <img src="img/service_icon_03.png" alt="">
                        </div>
                        <h4>BlockChain Storing</h4>
                        <div class="line-dec"></div>
                        <p>Hash of completed auctions will be stored in Ethereum Ropsten BlockChain!</p>
                        <div class="primary-blue-button">
                        </div>
                    </div>
                </div>
                <div class="col-md-3 col-sm-6 col-xs-12">
                    <div class="service-item">
                        <div class="icon">
                            <img src="img/service_icon_04.png" alt="">
                        </div>
                        <h4>Place Offers</h4>
                        <div class="line-dec"></div>
                        <p>Join and bid every active auctions you want!</p>
                        <div class="primary-blue-button">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    {% if user.is_authenticated %}

    <section id="testimonial">
        <div class="container">
            <div class="row">
                <div class="col-md-6 col-md-offset-3">
                    <h1 style="font-size: 60px; color: white;"><b>Active Auctions</b></h1><hr>
                    <div id="owl-testimonials" class="owl-carousel owl-theme">
                        {% if auctionsLenght == 0 %}
                            <div class="item">
                            <div class="testimonials-item">
                                <p><b>There aren't any active auctions now!</b></p>
                            </div>
                        </div>
                        {% else %}
                        {% for active in auctionsActive %}
                        <div class="item">
                            <div class="testimonials-item">
                                <p style="font-size: 30px;"><b>{{active.title}}</b></p>
                                <center>
                                    <a style="display: block; margin: 0 auto; width: auto;" href=javascript:popup("{{active.get_absolute_url}}","800","400")>
                                <div id="auctionimg">
                                    <img src="media/{{active.image}}">
                                </div></a>
                                </center>
                                <br>
                                <p style="font-size: 20px;"><b>Current Price : </b>{{active.endPrice}}</p>
                            </div>
                        </div>
                        {% endfor %}
                        {% endif %}
                    </div>
                    <hr><br>
                    <!-- Button trigger modal -->
                    <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal">Expired Auctions</button>
                    <!-- Modal -->
                    <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                        <div class="modal-dialog" role="document">
                            <div class="modal-content">
                                <div class="modal-body">
                                    {% for expire in auctionsExpired %}
                                    <div class="allinea">
                                        <div class="card text-white bg-secondary mb-3" style="max-width: 18rem;">
                                            <br><br>
                                            <div class="card-header"><h4>{{expire.title}}</h4></div><br>
                                            <div class="card-body">
                                                <div id="auctionimg"><img src="media/{{expire.image}}"></div><br>
                                                <b>Winner:</b> {{expire.winner}}<br>
                                                <b>Price:</b> {{expire.endPrice}}<br><hr>
                                            </div>
                                        </div>
                                    </div>
                                    {% endfor %}
                                    <div style="clear:both;"/>
                                </div>

                                    <center><button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button></center>

                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <div class="tabs-content" id="blog">
        <div class="container">
            <div class="row">
                <div class="wrapper">
                    <div class="col-md-4">
                        <div class="section-heading">
                            <h4>Publish</h4>
                            <div class="line-dec"></div>
                            <p>Upload your image and complete the required fields to publish your auction!</p>
                            <ul class="tabs clearfix" data-tabgroup="first-tab-group">
                                <li><a href="#tab1" class="active">Upload</a></li>
                                <li><a href="#tab2">Description</a></li>
                                <li><a href="#tab3">Price</a></li>
                                <li><a href="#tab4">Submit</a></li>
                            </ul>
                        </div>
                    </div>
                    <form method="POST" enctype="multipart/form-data">
                        {% csrf_token %}
                    <div class="col-md-8">
                        <section id="first-tab-group" class="tabgroup">
                            <div id="tab1">
                                <div align="middle" class="text-content">
                                    <center>{{form.image}}</center>
                                </div>
                            </div>
                            <div id="tab2">
                                <img src="img/blog_item_02.jpg" alt="">
                                <div class="text-content">
                                    <center><h4>Title</h4>
                                    {{form.title}}<br><br>
                                    <h4>Text</h4>
                                    {{form.text}}</center>
                                </div>
                            </div>
                            <div id="tab3">
                                <img src="img/blog_item_03.jpg" alt="">
                                <div class="text-content">
                                    <center>
                                    <p>Enter the price you want your auction to start :</p>
                                    {{form.startPrice}}</center>
                                </div>
                            </div>
                            <div id="tab4">
                                <img src="img/blog_item_04.jpg" alt="">
                                <div class="text-content">
                                    <center>
                                    <p>Click on the button below to publish your auction!</p>
                                    <input type="submit" placeholder="Go" value="Go"></center>
                                </div>
                            </div>
                        </section>
                    </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    {% else %}
    {% endif %}

    <div id="contact-us">
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <div class="section-heading">
                        <h4>Contact</h4>
                        <div class="line-dec"></div>
                        <p>If you wanna get informations about the site or report some problems, click the button below or use social links in the footer to contact me... I will be happy to help you! </p>
                            <div class="pop-button">
                                <a href="mailto:gianmariamazza94@gmail.com.it?"><h4><b>Send me an email!</b></h4></a>
                            </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <footer>
        <div class="container">
            <div class="row">
                <div class="col-md-4 col-sm-12">
                    <div class="logo">
                        <a href="#">BlockAuctions</a><hr>
                        <p>Auction BlockChain Site Project
                        <br>Created By: Giovanni Maria Mazza
                        <br>Design: TemplateMo</p>
                    </div>
                </div>
                <div class="col-md-4 col-sm-12">
                    <div class="location"><center><img style="margin-left:75px; margin-top: 20px; border-radius: 10px 10px 10px 10px;" src="{% static 'img/images.png' %}"></center></div>
                </div>
                <div class="col-md-2 col-sm-12"></div>
                <div class="contact-info"></div>
                <div class="col-md-2 col-sm-12">
                    <div class="connect-us">
                        <h4>Get Social with us</h4>
                        <ul>
                            <li><a href="https://twitter.com/kushking2209199" target="-blank"><i class="fa fa-twitter"></i></a></li>
                            <li><a href="https://www.facebook.com/gianmaria.mazzacash" target="-blank"><i class="fa fa-facebook"></i></a></li>
                            <li><a href="https://www.instagram.com/mazzacash/" target="-blank"><i class="fa fa-instagram"></i></a></li>
                            <li><a href="https://www.linkedin.com/in/giovanni-maria-mazza-7232bb1ba/" target="-blank"><i class="fa fa-linkedin"></i></a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="js/vendor/jquery-1.11.2.min.js"><\/script>')</script>

    <script src="{% static 'js/vendor/bootstrap.min.js' %}"></script>

    <script src="{% static 'js/plugins.js' %}"></script>
    <script src="{% static 'js/main.js' %}"></script>

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js" type="text/javascript"></script>

    <script type="text/javascript">
        $(document).ready(function() {
            // navigation click actions
            $('.scroll-link').on('click', function(event){
                event.preventDefault();
                var sectionID = $(this).attr("data-id");
                scrollToID('#' + sectionID, 750);
                });
            // scroll to top action
            $('.scroll-top').on('click', function(event) {
                event.preventDefault();
                $('html, body').animate({scrollTop:0}, 'slow');
                });
            // mobile nav toggle
            $('#nav-toggle').on('click', function (event) {
                event.preventDefault();
                $('#main-nav').toggleClass("open");
                });
            });
        // scroll function
        function scrollToID(id, speed){
            var offSet = 50;
            var targetOffset = $(id).offset().top - offSet;
            var mainNav = $('#main-nav');
            $('html,body').animate({scrollTop:targetOffset}, speed);
            if (mainNav.hasClass("open")) {
                mainNav.css("height", "1px").removeClass("in").addClass("collapse");
                mainNav.removeClass("open");
                }
            }
        if (typeof console === "undefined") {
            console = {
                log: function() { }
                };
            }
    </script>
</body>
</html>