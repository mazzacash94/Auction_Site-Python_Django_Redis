{% extends 'index.html' %}
{% load static %}

{% block head %}
    <head>
        <style>
p {
  text-align: center;
  font-size: 20px;
  margin-top: 0px;
}
    </style>
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <title>Bid</title>
        <link rel="shortcut icon" type="image/png" href="{% static 'dist/assets/img/favicon.ico' %}"/>
        <link href="{% static 'dist/css/styles.css' %}" rel="stylesheet" />
        <link href="https://cdn.datatables.net/1.10.20/css/dataTables.bootstrap4.min.css" rel="stylesheet" crossorigin="anonymous" />
        <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/js/all.min.js" crossorigin="anonymous"></script>
    </head>

{% endblock %}

{% block body %}
<body onunload="javascript:window.opener.location.reload ();">

<div id="layoutSidenav_content"><br>
                <main>
                    <div class="container-fluid">
                        <div class="row">
                            <div class="col-xl-3 col-md-6">
                                <div class="card bg-primary text-white mb-4">
                                    <div class="card-body">
                                        {% if auction.winner == None %}
                                        <p align="middle">Advertiser : </p>

                                        <p align="middle">{{auction.advertiser}}</p>
                                        {% elif auction.winner != None and auction.status == True %}
                                        <p align="middle">Highest Bidder : </p>

                                        <p align="middle">{{auction.winner}}</p>
                                        {% elif auction.winner != None and auction.status == False %}
                                        <p align="middle">Winner : </p>

                                        <p align="middle">{{auction.winner}}</p>
                                        {% endif %}
                                        <hr>
                                        <p align="middle">Description :</p>

                                        <p align="middle">{{auction.text}}</p>
                                        <hr>
                                        <p id="demo"></p>
                                        <hr>
                                        <form method="POST">
                                            {% csrf_token %}
                                            <input name="endPrice" class="form-control py-4" id="inputUsername" type="number" placeholder="Enter the amount..." />
                                            <br>
                                            <button style="display: block; margin: 0 auto; width: 100px; background-color:red" class="btn btn-primary" type="submit">Bid!</button>
                                        </form>
                                        <br>
                                        {% for message in messages %}
                                        <div align="middle" class="alert-danger">{{message}}</div>
                                        {% endfor %}
                                    </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </main>
            <script>
                // Set the date we're counting down to
var countDownDate = new Date("{{endDateFormat}}").getTime();

// Update the count down every 1 second
var x = setInterval(function() {

  // Get today's date and time
  var now = new Date().getTime();

  // Find the distance between now and the count down date
  var distance = countDownDate - now;

  // Time calculations for days, hours, minutes and seconds
  var days = Math.floor(distance / (1000 * 60 * 60 * 24));
  var hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
  var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
  var seconds = Math.floor((distance % (1000 * 60)) / 1000);

  // Output the result in an element with id="demo"
  document.getElementById("demo").innerHTML = days + "d " + hours + "h "
  + minutes + "m " + seconds + "s ";

  // If the count down is over, write some text
  if (distance < 0) {
    clearInterval(x);
    document.getElementById("demo").innerHTML = "EXPIRED";
  }
}, 1000);
            </script>

<script type="text/javascript">
        var delay_popup = 5000;
        setTimeout("document.getElementById('overlay').style.display='block'", delay_popup);
</script>

</body>
{% endblock %}